# 鉴权框架封装模块
::: tip 介绍
基于`Sa-Token`和`justAuth`进行封装，未选择Spring Security原因是复杂度较高，且同时对在前后端分离环境下支持一般。未选择`Shiro`是因为`Sa-Token`已经足够成熟，
API对中小项目来说更加直观和简单易用。
:::
## 功能
- 提供账号密码登陆功能
- 提供第三方登录扩展
- 支持配置多端登录
- 支持忽略鉴权注解`@IgnoreAuth`的功能支持
- 提供`PasswordEncoder`密码工具类和`SecurityUtil`安全工具类

## 接口
### AbstractAuthentication
### GetAuthClientService
### OpenIdAuthentication
### GetAuthLoginTypeService
### OpenIdAuthentication
### RouterCheck
### UsernamePasswordAuthentication

## 注解和工具类
### @IgnoreAuth
忽略鉴权注解，可以加在`Controller`的方法或类上，访问时不在进行鉴权，加在非`Controller`的地方无效，在`Controller`类和方法同时添加次注解时，以方法上的注解为准，注解配置如下：
- `ignore` 是否忽略请求鉴权，默认为`true`，未登录也可以访问
- `login` 只要登录就忽略权限校验, 在`ignore`为`false`时生效，默认为`false`
### PasswordEncoder

### SecurityUtil
## 配置说明
```yaml
bootx.starter.auth:
  # 默认密码
  defaultPassword: 123456
  # 不进行鉴权的路径
  ignoreUrls:
    - '/actuator/**'
    - '/v2/api-docs'
    - '/doc.html'
    - '/webjars/**'
```

## 扩展新的登录方式

1. 实现默认的账号密码登录：
通过实现 `UsernamePasswordAuthentication` 接口并注入到Spring容器中即可，见IAM模块中的`PasswordLoginHandler`实现，是否验证码以及验证码有效时间具体在实现类自己进行手动实现。
2. 第三方登录实现：
通过实现 `OpenIdAuthentication` 接口并注入到Spring容器中即可，见IAM模块中的`PhoneLoginHandler`和`WeChatLoginHandler`等实现
3. 调用登录：
`TokenEndpoint` 接收登录相关请求，通过分发到具体登录实现类进行登录，登录成功后保存Token到Redis中

