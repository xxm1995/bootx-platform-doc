import{_ as n,c as a,o as s,a as e}from"./app.032258ae.js";const h='{"title":"Spring \u529F\u80FD\u6269\u5C55","description":"","frontmatter":{},"headers":[{"level":2,"title":"Spring \u529F\u80FD\u6269\u5C55","slug":"spring-\u529F\u80FD\u6269\u5C55"},{"level":3,"title":"\u529F\u80FD","slug":"\u529F\u80FD"},{"level":3,"title":"\u4F7F\u7528","slug":"\u4F7F\u7528"},{"level":3,"title":"\u5BF9\u5E94\u7C7B","slug":"\u5BF9\u5E94\u7C7B"}],"relativePath":"doc/server/common/Spring\u529F\u80FD\u6269\u5C55.md"}',t={},o=e(`<h2 id="spring-\u529F\u80FD\u6269\u5C55" tabindex="-1">Spring \u529F\u80FD\u6269\u5C55 <a class="header-anchor" href="#spring-\u529F\u80FD\u6269\u5C55" aria-hidden="true">#</a></h2><h3 id="\u529F\u80FD" tabindex="-1">\u529F\u80FD <a class="header-anchor" href="#\u529F\u80FD" aria-hidden="true">#</a></h3><ul><li>\u542F\u7528hutool\u7684<code>SpringUtil</code>\u5DE5\u5177\u7C7B\uFF0C\u76F4\u63A5\u53EF\u4EE5\u4F7F\u7528</li><li>\u914D\u7F6E\u7EBF\u7A0B\u6C60\uFF0C\u5E76\u7528TTL\u8FDB\u884C\u5305\u88C5\uFF0C\u7528\u4E8E\u5F02\u6B65\u7EBF\u7A0B\u4E2D\u83B7\u53D6\u73AF\u5883\u6570\u636E\uFF0C\u5982\u8BF7\u6C42\u5934\u4FE1\u606F</li><li>\u63D0\u4F9B<code>@CountTime</code>\u65B9\u6CD5\u8BA1\u65F6\u6CE8\u89E3\uFF0C\u5FEB\u901F\u6253\u5370\u65B9\u6CD5\u8017\u65F6\u65F6\u95F4</li><li>\u63D0\u4F9B<code>CorsFilter</code>\u8FC7\u6EE4\u5668\u5904\u7406\u8DE8\u57DF\u8BF7\u6C42\uFF0C\u81EA\u52A8\u5904\u7406\u8DE8\u57DF\u95EE\u9898</li></ul><h3 id="\u4F7F\u7528" tabindex="-1">\u4F7F\u7528 <a class="header-anchor" href="#\u4F7F\u7528" aria-hidden="true">#</a></h3><h4 id="\u7EBF\u7A0B\u6C60\u4F7F\u7528\u8BF4\u660E" tabindex="-1">\u7EBF\u7A0B\u6C60\u4F7F\u7528\u8BF4\u660E <a class="header-anchor" href="#\u7EBF\u7A0B\u6C60\u4F7F\u7528\u8BF4\u660E" aria-hidden="true">#</a></h4><p>\u7EBF\u7A0B\u6C60\u4F7F\u7528\u65F6\u9700\u8981\u8FDB\u884C\u6307\u5B9A\u914D\u7F6E\u7684TTL\u5305\u88C5\u8FC7\u7684\u7EBF\u7A0B\u6C60\uFF0C\u5426\u5219\u4F1A\u53D1\u751F\u7EBF\u7A0B\u53D8\u91CF\u4E22\u5931\u7684\u95EE\u9898\uFF0C\u8FD9\u4E24\u4E2A\u7EBF\u7A0B\u6C60\u5206\u522B\u662F</p><ul><li><code>ExecutorService</code> asyncExecutorService</li><li><code>Executor</code> asyncExecutor</li></ul><div class="language-java"><pre><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Async</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span>
 
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@RequiredArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6267\u884C\u5668</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Executor</span> asyncExecutor<span class="token punctuation">;</span>
    <span class="token comment">// \u6267\u884C\u5668\u670D\u52A1</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ExecutorService</span> asyncExecutorService<span class="token punctuation">;</span>

    <span class="token comment">// \u5F02\u6B65\u65B9\u6CD5\u6307\u5B9A\u7EBF\u7A0B\u6C60</span>
    <span class="token annotation punctuation">@Async</span><span class="token punctuation">(</span><span class="token string">&quot;asyncExecutor&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendHtmlMail</span><span class="token punctuation">(</span><span class="token class-name">MailMailParam</span> mailParam<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="\u53C2\u6570\u914D\u7F6E" tabindex="-1">\u53C2\u6570\u914D\u7F6E <a class="header-anchor" href="#\u53C2\u6570\u914D\u7F6E" aria-hidden="true">#</a></h4><div class="language-yaml"><pre><code><span class="token key atrule">bootx</span><span class="token punctuation">:</span>
  <span class="token key atrule">common</span><span class="token punctuation">:</span>
    <span class="token key atrule">spring</span><span class="token punctuation">:</span>
      <span class="token comment"># \u5F00\u542Fcors\u8DE8\u57DF\u5904\u7406</span>
      <span class="token key atrule">cors</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">executor</span><span class="token punctuation">:</span>
        <span class="token comment"># \u7EBF\u7A0B\u6C60\u7EF4\u62A4\u7EBF\u7A0B\u7684\u6700\u5C11\u6570\u91CF</span>
        <span class="token key atrule">core-pool-size</span><span class="token punctuation">:</span> <span class="token number">10</span>
        <span class="token comment"># \u7F13\u5B58\u961F\u5217\u5BB9\u91CF</span>
        <span class="token key atrule">max-pool-size</span><span class="token punctuation">:</span> <span class="token number">50</span>
        <span class="token comment"># \u7F13\u5B58\u961F\u5217\u5BB9\u91CF</span>
        <span class="token key atrule">queue-capacity</span><span class="token punctuation">:</span> <span class="token number">5000</span>
        <span class="token comment"># \u4FDD\u6301\u6D3B\u52A8\u79D2\u6570</span>
        <span class="token key atrule">keep-alive-seconds</span><span class="token punctuation">:</span> <span class="token number">60</span>
</code></pre></div><h3 id="\u5BF9\u5E94\u7C7B" tabindex="-1">\u5BF9\u5E94\u7C7B <a class="header-anchor" href="#\u5BF9\u5E94\u7C7B" aria-hidden="true">#</a></h3><ul><li><code>CountTimeAop</code> \u65B9\u6CD5\u6267\u884C\u8017\u65F6\u8BB0\u5F55\u5207\u9762</li><li><code>AsyncExecutorConfiguration</code> \u5F02\u6B65\u7EBF\u7A0B\u6C60\u914D\u914D\u7F6E\uFF0C\u4F7F\u7528TTL\u5BB9\u5668\u8FDB\u884C\u5305\u88C5</li><li><code>WebServletUtil</code> web\u670D\u52A1\u5668\u5DE5\u5177\u7C7B\uFF0C\u53EF\u4EE5\u83B7\u53D6\u5F53\u524D\u8BF7\u6C42\u7684 <code>HttpServletRequest</code> \u5BF9\u8C61</li><li><code>CorsAutoConfiguration</code> Cors\u8DE8\u57DF\u5904\u7406\u914D\u7F6E</li></ul>`,12),p=[o];function c(l,i,r,u,k,d){return s(),a("div",null,p)}var _=n(t,[["render",c]]);export{h as __pageData,_ as default};
