import{_ as s,c as a,o as i,V as n}from"./chunks/framework.TiLr8DIm.js";const E=JSON.parse('{"title":"项目部署","description":"","frontmatter":{},"headers":[],"relativePath":"platform/overview/config/项目部署.md","filePath":"platform/overview/config/项目部署.md","lastUpdated":1692782764000}'),e={name:"platform/overview/config/项目部署.md"},t=n(`<h1 id="项目部署" tabindex="-1">项目部署 <a class="header-anchor" href="#项目部署">¶</a></h1><h2 id="后端部署" tabindex="-1">后端部署 <a class="header-anchor" href="#后端部署">¶</a></h2><h3 id="项目构建" tabindex="-1">项目构建 <a class="header-anchor" href="#项目构建">¶</a></h3><p>首先在项目中执行<code>mvn clean install -Dmaven.javadoc.skip=true</code>命令进行构建，<code>-Dmaven.javadoc.skip=true</code>是跳过DOC文档相关的构造， 可以加快构建的速度。构建执行完成后，到项目下<code>bootx-start</code>模块下的<code>target</code>目录中找到<code>bootx-start.jar</code>文件，这个文件就是我们所需要的可执行Jar包</p><h3 id="jar包方式部署" tabindex="-1">jar包方式部署 <a class="header-anchor" href="#jar包方式部署">¶</a></h3><ol><li>在主机中安装jdk</li><li>将构建出的Jar上传到主机上，然后执行 <code>java -jar bootx-start.jar</code></li></ol><h3 id="docker部署" tabindex="-1">docker部署 <a class="header-anchor" href="#docker部署">¶</a></h3><blockquote><p>默认项目中已经提供已经编写好的<code>Dockerfile</code>，可以直接根据这个配置文件进行构建Docker镜像，推荐启动时使用<code>Docker-Compose</code>，方便进行进行管理，</p></blockquote><p><strong>启动命令</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run -p </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9999</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:9999 bootx-start</span></span></code></pre></div><p><strong>Dockerfile文件</strong></p><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># java8基础镜像</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> registry.cn-beijing.aliyuncs.com/xxm1995/java8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 作者信息</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MAINTAINER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bootx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 时区设置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ln -sf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动命令</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JAVA_COMM=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-Djava.security.egd=file:/dev/./urandom -Dfile.encoding=UTF-8&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动选项配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JAVA_OPTS=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Agent配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JAVA_AGENT=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 参数配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JAVA_ARGS=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 工作目录</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 端口暴露</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EXPOSE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 9999</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加执行jar包</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bootx-start/target/bootx-start.jar bootx-start.jar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 执行启动命令</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java -jar $JAVA_OPTS $JAVA_AGENT $JAVA_COMM bootx-start.jar $JAVA_ARGS</span></span></code></pre></div><h3 id="docker-compose部署" tabindex="-1">docker-compose部署 <a class="header-anchor" href="#docker-compose部署">¶</a></h3><p>Docker-Compose是一个轻量级的单机Docker容器编排工具</p><h3 id="kubernetes部署" tabindex="-1">kubernetes部署 <a class="header-anchor" href="#kubernetes部署">¶</a></h3><h2 id="前端部署" tabindex="-1">前端部署 <a class="header-anchor" href="#前端部署">¶</a></h2><h3 id="项目构建-1" tabindex="-1">项目构建 <a class="header-anchor" href="#项目构建-1">¶</a></h3><p>Node版本需要使用16+，包管理工具使用<code>pnpm</code>，构建完后的制品在<code>dist</code>文件夹下，</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 执行打包命令</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run build</span></span></code></pre></div><h3 id="使用nginx部署" tabindex="-1">使用Nginx部署 <a class="header-anchor" href="#使用nginx部署">¶</a></h3><h3 id="嵌入到jar中" tabindex="-1">嵌入到Jar中 <a class="header-anchor" href="#嵌入到jar中">¶</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>可以利用Java容器可以处理，嵌入到后端Jar包中，在启动后端时同时一块将前端启动</p></div><h4 id="修改路由模式" tabindex="-1">修改路由模式 <a class="header-anchor" href="#修改路由模式">¶</a></h4><p>将前端的路由模式配置为<code>hash</code>模式，不可以使用<code>history</code>模式。在前端 <code>src/router/index.ts</code>文件中进行更改</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createRouter, createWebHashHistory, createWebHistory } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue-router&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createRouter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 将web历史模式替换为下面的</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // history: createWebHashHistory(),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 使用这个</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  history: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createWebHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h4 id="添加带后端项目中" tabindex="-1">添加带后端项目中 <a class="header-anchor" href="#添加带后端项目中">¶</a></h4><h3 id="阿里云效自动化部署" tabindex="-1">阿里云效自动化部署 <a class="header-anchor" href="#阿里云效自动化部署">¶</a></h3>`,27),l=[t];function h(p,k,r,d,c,o){return i(),a("div",null,l)}const y=s(e,[["render",h]]);export{E as __pageData,y as default};
