# 接口列表
## 支付接口列表

| 编码         | 名称         | 接口地址             | 备注                                       | 支持回调消息 |
| ------------ | ------------ | -------------------- | ------------------------------------------ | ------------ |
| pay          | 统一下单     | /uniPay/pay          | 支持组合支付                               | 支持         |
| simplePay    | 简单下单     | /uniPay/simplePay    | 不支持组合支付                             | 支持         |
| close        | 订单关闭     | /uniPay/close        |                                            | 支持         |
| refund       | 统一退款     | /uniPay/refund       |                                            | 支持         |
| simpleRefund | 简单退款     | /uniPay/simpleRefund | 非组合支付订单可以使用简单退款接口进行退款 | 支持         |
| syncPay      | 支付状态同步 | /uniPay/syncPay      |                                            | 不支持       |
| syncRefund   | 退款状态同步 | /uniPay/syncRefund   |                                            | 不支持       |
| transfer     | 转账         | /uniPay/transfer     |                                            | 支持         |
| allocation   | 分账         | /uniPay/allocation   |                                            | 支持         |
|              |              |                      |                                            |              |

## 查询接口列表

## 协议规则

### 请求规范
| 类型   | 描述                  |
|------|---------------------| 
| 传输方式 | 采用`HTTP`/`HTTPS`传输  | 
| 提交方式 | `POST`              | 
| 参数类型 | `application/json`  | 
| 响应类型 | `application/json`  | 
| 字符编码 | `UTF-8`             | 
| 签名算法 | `MD5`/`HMAC_SHA256` | 

### 参数规范
| 参数   | 说明                     |
|------|------------------------| 
| 交易金额 | 单位为分，参数值不能带小数。         |
| 时间参数 | 所有涉及时间参数均使用精确到毫秒的13位数值 |


## 签名规则
### 说明
将发送或者接收到的所有数据假定位为集合M，将集合内非空的参数值按照参数名ASCII码从小到大排序，使用URL请求键值对参数方式进行拼接成字符串，类似`key1=value1&key2=value2`这样的格式。需要注意如下原则：
- 参数名ASCII码从小到大排序（字典序）
- 如果参数值为空不进行签名
- 参数名不区分大小写
- 进行验签时，`sign`字段不参与签名，将生成的签名与该`sign`值作校验

将上面生成的参数后追加上 `sign=秘钥`（追加后格式为 `key1=value1&key2=value2&key=秘钥`），然后将该字符串转换为大写，然后进行数据摘要算法计算出 `sign`值，并将`sign`值添加到请求中进行发送。

> 数据摘要支持`MD5`和`HmacSHA256`两种，使用`HmacSHA256`时，key值为秘钥

### 样例

## 公共请求参数


## 公共参数定义

### 请求参数

> 系统的接口请求参数都基于下列参数进行扩展，所有的的接口请求时都会有这些参数，下面介绍参数时，不再单独列出

| 参数         | 类型     | 是否必选 | 描述                                             | 示例值 |
|------------|--------|------|------------------------------------------------|-----|
| clientIp   | string | 否    | 用户IP，支持V4和V6，部分支付方式要求必填，如微信                    |     |
| extraParam | string | 否    | 商户扩展参数,回调时会原样返回                                |     |
| reqTime    | long   | 是    | 请求时间，使用时间戳(秒级)                                 |     |
| version    | string | 是    | 版本号，默认为1.0                                     | 1.0 |
| notReturn  | bool   | 否    | 是否不进行同步通知的跳转，为`true`将不进行回调通知                   |     |
| returnUrl  | string | 否    | 同步通知地址，支付完成后，会自动跳转到设置的页面                       |     |
| notNotify  | bool   | 否    | 是否不启用异步通知，为`true`将不会发送回调通知                     |     |
| notifyUrl  | string | 否    | 异步通知地址，为空则读取管理端的配置，如果通知方式配置的是消息队列方式，此配置不会生效    |     |
| signType   | enum   | 否    | 签名类型，`MD5`/`RSA2`，目前默认只支持`MD5`，如果商户应用开启验签选项后必填 |     |
| sign       | string | 否    | 签名值，如果商户应用开启验签选项后必填                            |     |

### 响应参数

#### 公共响应参数

> 系统返回的结构体都是这个格式的数据，不同的接口会返回不同的业务响应参数数据

| 字段 | 类型   | 名称             | 描述                                                         | 示例值 |
| ---- | ------ | ---------------- | ------------------------------------------------------------ | ------ |
| code | int    | 状态码           | 默认是0，非零标表明请求失败                                  | 0      |
| msg  | string | 提示信息         | 如果code不为0，则显示具体错误原因，例如：签名失败、参数格式校验错误 |        |
| data | json   | 业务响应参数数据 | json格式数据，不同的接口返回结构不同                         |        |
| sign | string | 签名信息         | 对data内的数据进行签名，如data为空则不返回，需要在通道应用中开启返回数据签名选项 |        |

#### 业务响应公共参数

| 字段       | 类型   | 名称         | 描述                         | 示例值 |
| ---------- | ------ | ------------ | ---------------------------- | ------ |
| reqId      | string | 请求id       |                              |        |
| extraParam | string | 商户扩展参数 | 商户请求时传输的，会原样返回 |        |
|            |        |              |                              |        |




